{"version":3,"file":"teachers-overview.min.js","sources":["../src/teachers-overview.js"],"sourcesContent":["import Widget from 'lytix_helper/widget';\nimport Templates from 'core/templates';\n\nconst WIDGET_ID = 'grademonitor';\n\nexport const init = (contextid, userid, courseid) => {\n    const dataPromise = Widget.getData(\n        'local_lytix_lytix_grademonitor_grademonitor_get_table',\n        {contextid: contextid, courseid: courseid}\n    );\n\n    const stringsPromise = Widget.getStrings({\n        lytix_grademonitor: { // eslint-disable-line camelcase\n            differing: {\n                goal: 'th_goal',\n                grade: 'th_grade',\n                estimation: 'th_estimation',\n            },\n        },\n    });\n\n    Promise.all([stringsPromise, dataPromise])\n    .then(values => {\n        const\n            strings = values[0],\n            data = values[1],\n            titles = [strings.goal, strings.estimation, strings.grade],\n            propertyNames = ['Goals', 'Estimations', 'Grades'],\n            view = {\n                rows: new Array(3),\n            },\n            rows = view.rows;\n\n        for (let i = 0; i < 3; ++i) {\n            rows[i] = {\n                title: titles[i],\n                counts: data[propertyNames[i]],\n            };\n        }\n\n        return Templates.render('lytix_grademonitor/teachers-overview', view);\n    })\n    .then(html => {\n        Widget.getContentContainer(WIDGET_ID).insertAdjacentHTML('beforeend', html);\n        return;\n    })\n    .finally(() => {\n        document.getElementById(WIDGET_ID).classList.remove('loading');\n    })\n    .catch(error => {\n        Widget.handleError(error, WIDGET_ID);\n    });\n};\n"],"names":["contextid","userid","courseid","dataPromise","Widget","getData","stringsPromise","getStrings","lytix_grademonitor","differing","goal","grade","estimation","Promise","all","then","values","strings","data","titles","propertyNames","view","rows","Array","i","title","counts","Templates","render","html","getContentContainer","insertAdjacentHTML","finally","document","getElementById","classList","remove","catch","error","handleError"],"mappings":"2YAKoB,SAACA,UAAWC,OAAQC,cAC9BC,YAAcC,gBAAOC,QACvB,wDACA,CAACL,UAAWA,UAAWE,SAAUA,WAG/BI,eAAiBF,gBAAOG,WAAW,CACrCC,mBAAoB,CAChBC,UAAW,CACPC,KAAM,UACNC,MAAO,WACPC,WAAY,oBAKxBC,QAAQC,IAAI,CAACR,eAAgBH,cAC5BY,MAAK,SAAAC,gBAEEC,QAAUD,OAAO,GACjBE,KAAOF,OAAO,GACdG,OAAS,CAACF,QAAQP,KAAMO,QAAQL,WAAYK,QAAQN,OACpDS,cAAgB,CAAC,QAAS,cAAe,UACzCC,KAAO,CACHC,KAAM,IAAIC,MAAM,IAEpBD,KAAOD,KAAKC,KAEPE,EAAI,EAAGA,EAAI,IAAKA,EACrBF,KAAKE,GAAK,CACNC,MAAON,OAAOK,GACdE,OAAQR,KAAKE,cAAcI,YAI5BG,mBAAUC,OAAO,uCAAwCP,SAEnEN,MAAK,SAAAc,sBACKC,oBAxCG,gBAwC4BC,mBAAmB,YAAaF,SAGzEG,SAAQ,WACLC,SAASC,eA5CC,gBA4CyBC,UAAUC,OAAO,cAEvDC,OAAM,SAAAC,uBACIC,YAAYD,MA/CT"}